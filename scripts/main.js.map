{"version":3,"sources":["main.babel.js"],"names":["app","loca","filtered","destination","place","selected","lat","venue","location","lng","priceTier","price","tier","imgUrl","photos","count","groups","url","console","log","$","css","text","name","distance","rating","contact","phone","tips","getImage","ajax","id","method","dataType","data","client_id","client_secret","v","fail","err","done","response","items","prefix","suffix","substr","pickRandom","array","randomNum","Math","floor","random","length","swal","filterResult","filter","googleMaps","desti","showSteps","directionResult","markerArray","stepDisplay","map","myRoute","routes","legs","i","steps","google","maps","Marker","setMap","googleKey","origin","LatLng","long","map_container","mapInfo","center","zoom","directionsService","DirectionsService","Map","directionsDisplay","DirectionsRenderer","InfoWindow","route","travelMode","status","setDirections","window","alert","fourSquare","what","clientId","clientSecret","ll","radius","query","openNow","then","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","init","eventFire","$s3back","$s2direction","$s2change","$s2another","$s1food","on","fadeToggle","$selection","this"],"mappings":"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","file":"main.babel.js","sourcesContent":["const app = {}\napp.loca = {};\napp.filtered = []\napp.destination = {}\n\n\napp.place = (selected) => {\n\n\tapp.destination = {\n\t\tlat: selected.venue.location.lat,\n\t\tlng: selected.venue.location.lng\n\t}\n\n\tlet priceTier = ''\n\n\tif (selected.venue.price.tier == 1){\n\t\tpriceTier = '$'\n\t} else if (selected.venue.price.tier = 2){\n\t\tpriceTier = '$$'\n\t} else {\n\t\tpriceTier = '$$$'\n\t}\n\n\tlet imgUrl = ''\n\n\tif(selected.venue.photos.count == 0){\n\t\timgUrl = 'assets/img/noimage.jpg'\n\t}else{\n\t\timgUrl = selected.venue.photos.groups[0].url\n\t}\n\n\tconsole.log(selected)\n\t$('#img_container').css(\"background-image\", `url('${imgUrl}')`);\n\n\t$('#place_title').text(selected.venue.name);\n\t$('#distance').text(`${selected.venue.location.distance}m`);\n\t$('#rating').text(selected.venue.rating);\n\t$('#price').text(priceTier);\n\t$('#website').text(selected.venue.url);\n\t$('#phone').text(selected.venue.contact.phone);\n\n\t$('#tip h3').text(selected.tips[0].text);\n}\n\napp.getImage = (selected) => {\n\t$.ajax({\n\t\turl: `https://api.foursquare.com/v2/venues/${selected.venue.id}/photos`,\n  \t\tmethod: 'GET',\n  \t\tdataType: \"json\",\n  \t\tdata: {\n\t\t\tclient_id: \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\",\n\t\t\tclient_secret: \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\",\n\t\t\tv: 20171120\n\t\t}\n\t}).fail(function(err){\n\t\tconsole.log(err);\n\t}).done(function(data){\n\t\tconsole.log(data.response.photos.items[0])\n\t\t$('#img_container').css(\"background-image\", `url('${data.response.photos.items[0].prefix}${data.response.photos.items[0].suffix.substr(1)}')`);\n\t\t// for (let i = 0; i < data.response.photos.items.length; i++){\n\t\t\t// const markUp = `<div class=\"carousel-cell\"><img class=\"carousel-cell-image\"\n\t\t//    data-flickity-lazyload=\"${data.response.photos.items[0].prefix}${data.response.photos.items[0].suffix.substr(1)}\" /></div>`\n      // console.log(markUp)\n\t\t\t// $('.main-carousel').appendTo(markUp);\n\t\t// }\n\t})\n}\n\napp.pickRandom = (array) => {\n\tconst randomNum = Math.floor(Math.random() * array.length)\n\tif(array.length > 0){\n\t\tapp.place(array[randomNum]);\n\t\t// app.getImage(array[randomNum]);\n\t} else {\n\t\tswal(`Couldn't find any Nice Place for you`);\n\t}\n}\n\napp.filterResult = (data) => {\n\tapp.filtered = data.filter((data) => {\n\t\treturn data.venue.rating > 8.5;\n\t})\n}\n\napp.googleMaps = (loca, desti) => {\n\tapp.googleKey = \"AIzaSyB6UumqnkB2X99K9Eeef_RzAQSENqA3I0k\";\n\n\tlet map;\n\tvar markerArray = [];\n\n\tconst origin = new google.maps.LatLng(loca.lat, loca.long);\n\tconst destination = new google.maps.LatLng(desti.lat,desti.lng);\n\tconst map_container = $('#map')[0];\n\tconst mapInfo = {\n\t\tcenter: {\n\t\t\tlat: loca.lat,\n\t\t\tlng: loca.long\n\t\t},\n\t\tzoom: 20\n\t\t\t// styles: options\n\t\t}\n\n\t// Instantiate a directions service.\n\tvar directionsService = new google.maps.DirectionsService;\n\n\tmap = new google.maps.Map(map_container, mapInfo);\n\t// home = new google.maps.Marker({\n\t// \tposition: new google.maps.LatLng(mapInfo.center.lat, mapInfo.center.lng),\n\t// \tmap:map\n\t// });\n\n\t// Create a renderer for directions and bind it to the map.\n    var directionsDisplay = new google.maps.DirectionsRenderer({map: map});\n\n    // Instantiate an info window to hold step text.\n    var stepDisplay = new google.maps.InfoWindow;\n    // Display the route between the initial start and end selections.\n\tcalculateAndDisplayRoute(directionsDisplay, directionsService, markerArray, stepDisplay, map);\n\n\tfunction calculateAndDisplayRoute(directionsDisplay, directionsService,\n\t  markerArray, stepDisplay, map) {\n\t\t// First, remove any existing markers from the map.\n\t\tfor (var i = 0; i < markerArray.length; i++) {\n\t\t  markerArray[i].setMap(null);\n\t\t}\n\n\t// Retrieve the start and end locations and create a DirectionsRequest using\n\t// WALKING directions.\n\t\tdirectionsService.route({\n\t\t\torigin: origin,\n\t\t\tdestination: destination,\n\t\t\ttravelMode: 'WALKING'\n\t\t}, function(response, status) {\n\t\t\t// Route the directions and pass the response to a function to create\n\t\t\t// markers for each step.\n\t\t\tif (status === 'OK') {\n\t\t\t\t// document.getElementById('warnings-panel').innerHTML =\n\t\t\t //    '<b>' + response.routes[0].warnings + '</b>';\n\t\t\t\tdirectionsDisplay.setDirections(response);\n\t\t\t\tshowSteps(response, markerArray, stepDisplay, map);\n\t\t\t} else {\n\t\t\t\twindow.alert('Directions request failed due to ' + status);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction showSteps(directionResult, markerArray, stepDisplay, map) {\n\t\t// For each step, place a marker, and add the text to the marker's infowindow.\n\t\t// Also attach the marker to an array so we can keep track of it and remove it\n\t\t// when calculating new routes.\n\t\tvar myRoute = directionResult.routes[0].legs[0];\n\t\tfor (var i = 0; i < myRoute.steps.length; i++) {\n\t\t\tvar marker = markerArray[i] = markerArray[i] || new google.maps.Marker;\n\t\t\tmarker.setMap(map);\n\t\t\t// marker.setPosition(myRoute.steps[i].start_location);\n\t\t\t// attachInstructionText(stepDisplay, marker, myRoute.steps[i].instructions, map);\n\t\t}\n\t}\n\n\tfunction attachInstructionText(stepDisplay, marker, text, map) {\n\t\tgoogle.maps.event.addListener(marker, 'click', function() {\n\t\t// Open an info window when the marker is clicked on, containing the text\n\t\t// of the step.\n\t\t\tstepDisplay.setContent(text);\n\t\t\tstepDisplay.open(map, marker);\n\t\t});\n\t}\n}\n\napp.fourSquare = (loca, what) => {\n\tapp.clientId = \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\";\n\tapp.clientSecret = \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\";\n\t$.ajax({\n\t\turl: 'https://api.foursquare.com/v2/venues/explore',\n  \t\tmethod: 'GET',\n  \t\tdataType: \"json\",\n  \t\tdata: {\n\t\t\tclient_id: \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\",\n\t\t\tclient_secret: \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\",\n\t\t\tll: `${loca.lat},${loca.long}`,\n\t\t\t// section: \"food\",\n\t\t\tradius: 1500,\n\t\t\tquery: `${what}`,\n\t\t\topenNow: 1,\n\t\t\tv: 20171120\n\t\t}\n\t}).fail(function(err){\n\t\tconsole.log(err);\n\t}).done(function(data){\n\t\tapp.filterResult(data.response.groups[\"0\"].items);\n\t}).then(() =>{\n\t\tapp.pickRandom(app.filtered);\n\t})\n}\n\napp.location = () => {\n\treturn new Promise((resolve, reject) => {\n\t\tnavigator.geolocation.getCurrentPosition((position) =>{\n\t\t\tresolve(position);\t\n\t\t\tapp.loca = {\n\t\t\t\tlat: position.coords.latitude,\n\t\t\t\tlong: position.coords.longitude,\n\t\t\t}\n\t\t})\n\t})\n}\n\napp.init = () => {\n\t// $('.main-carousel').flickity({  \n\t// });\n}\n\napp.eventFire = () => {\n\tconst $s3back = $('#section3 .btnblue');\n\tconst $s2direction = $('#section2 .btnblue');\n\tconst $s2change = $('#section2 .btnwhite:first-child');\n\tconst $s2another = $('#section2 .btnwhite:last-child');\n\tconst $s1food = $('.foodbtn');\n\n\t$s3back.on(\"click\", () => {\n\t\t$('#section2').fadeToggle();\n\t\t$('#section3').fadeToggle();\n\t})\n\n\t$s2direction.on(\"click\", () => {\n\t\tapp.googleMaps(app.loca, app.destination);\n\t\t$('#section3').fadeToggle();\n\t\t$('#section2').fadeToggle();\n\n\t})\n\n\t$s2change.on(\"click\", () => {\n\t\t$('#section1').fadeToggle();\n\t\t$('#section2').fadeToggle();\n\t})\n\n\t$s2another.on(\"click\", () => {\n\t\tapp.pickRandom(app.filtered)\n\t\t\n\t})\n\n\t$s1food.on(\"click\", function(){\n\t\tconst $selection = $(this).data('type');\n\t\tconsole.log($selection);\n\n\t\tapp.location().then((resolve) =>{\n\t\t\tapp.fourSquare(app.loca, $selection)\n\t\t})\n\t\t\n\n\t\t$('#section2').fadeToggle();\n\t\t$('#section1').fadeToggle();\n\t})\n}\n\n$(function() {\n\tapp.init();\n\tapp.eventFire();\n});"]}