{"version":3,"sources":["main.babel.js"],"names":["app","loca","filtered","destination","selected","selectedPlace","selectedImage","foodType","baseURL","map","displayDatabase","display","userData","firebase","database","ref","userId","uid","limitToLast","on","snapshot","data","val","array","$","value","index","reverse","length","append","forEach","item","writeup","photo","name","url","phone","img","title","website","place","lat","lng","priceTier","price","text","distance","rating","html","tips","css","mapArray","auth","currentUser","push","getImage","ajax","id","method","dataType","client_id","client_secret","v","then","response","photos","items","prefix","width","height","suffix","venue","location","tier","contact","pickRandom","randomNum","Math","floor","random","TweenMax","to","opacity","filterResult","filter","ndelete","console","log","indexOf","splice","fourSquare","what","clientId","clientSecret","ll","long","radius","query","openNow","groups","fadeToggle","ease","Back","easeOut","delay","googleMaps","desti","showSteps","directionResult","markerArray","stepDisplay","myRoute","routes","legs","i","steps","google","maps","Marker","setMap","googleKey","origin","LatLng","map_container","mapInfo","center","zoom","directionsService","DirectionsService","Map","directionsDisplay","DirectionsRenderer","InfoWindow","route","travelMode","status","setDirections","window","alert","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","dataBase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","initializeApp","onAuthStateChanged","user","Log","type","provider","FacebookAuthProvider","GoogleAuthProvider","GithubAuthProvider","pathname","signInWithPopup","result","credential","accessToken","catch","error","code","message","email","eventFire","$s3back","$s2direction","$s2change","$s2another","$s2like","$s1food","$shlog","$shheader","$segoogle","this","addClass","setTimeout","removeClass","remove","prepend","fadeOut","fadeIn","signOut","hasClass","empty","is","init"],"mappings":"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","file":"main.babel.js","sourcesContent":["const app = {}\napp.loca = {};\napp.filtered = []\napp.destination = {}\napp.selected = {}\napp.selectedPlace = {};\napp.selectedImage = {};\napp.foodType = {}\n\n\napp.baseURL = `restaurant_roulette/`;\nlet map;\n\napp.displayDatabase = (display) => {\n\tlet userData;\n\tif(display == 'liked'){\n\t\tuserData = firebase.database().ref(`users/${app.userId.uid}/${display}`);\t\n\t} else {\n\t\tuserData = firebase.database().ref(`users/${app.userId.uid}/${display}`).limitToLast(10);\n\t}\n\n\tuserData.on('value', function(snapshot) {\n\t\tconst data = snapshot.val();\n\t\tvar array = $.map(data, function(value, index){\n\t\t\treturn value;\n\t\t}).reverse();\n\n\t\tif(array.length == 0){\n\t\t\t$(`#${display}_content`).append(`<h2>You did't like anything yet</h2>`)\n\t\t} else {\n\t\t\tif(display == 'liked'){\n\t\t\t\t$(`#${display}_content`).append(`<h1>You Liked</h1>`)\n\t\t\t} else {\n\t\t\t\t$(`#${display}_content`).append(`<h1>You Looked At</h1>`)\n\t\t\t}\n\t\t\t\n\t\t\tarray.forEach(function(item){\n\t\t\t\t$(`#${display}_content`).append(app.writeup(item.photo, item.name, item.url, item.phone));\n\t\t\t})\n\t\t}\n\t});\n}\n\napp.writeup = (img, title, website, phone) => {\n\treturn `<div class=\"container\">\n\t\t\t<img src=\"${img}\">\n\t\t\t<div class=\"content\">\n\t\t\t\t<h3 class=\"place_title\">${title}</h3>\n\t\t\t\t\n\t\t\t\t<h4 class=\"website\"><a href=\"${website}\">${website}</a></h4>\n\t\t\n\t\t\t\t<h4 class=\"phone\"><a href=\"tel:${phone}\">${phone}</a></h4>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"divider content_divider\"></div>`\n}\n\napp.place = (selected) => {\n\tapp.destination = {\n\t\tlat: selected.lat,\n\t\tlng: selected.lng\n\t}\n\tlet priceTier = ''\n\n\tif (selected.price == 1){\n\t\tpriceTier = '$'\n\t} else if (selected.price = 2){\n\t\tpriceTier = '$$'\n\t} else {\n\t\tpriceTier = '$$$'\n\t}\n\n\t$('#section2 .place_title').text(selected.name);\n\t$('#section2 #distance').text(`${selected.distance}m`);\n\t$('#section2 .rating').text(selected.rating);\n\t$('#section2 #price').text(priceTier);\n\t$('#section2 #website').html(`<a href=\"${selected.url}\">${selected.url}</a>`);\n\t$('#section2 #phone').html(`<a href=\"tel:${selected.phone}\">${selected.phone}</a>`);\n\t$('#tip h3').text(selected.tips);\n\t$('#img_container').css(\"background-image\", `url('${selected.photo}')`);\n\t\n\tapp.mapArray(app.selected);\n\tfirebase.database().ref(`/users/${firebase.auth().currentUser.uid}/history`).push(app.selectedPlace);\n}\n\napp.getImage = (selected) => {\n\t$.ajax({\n\t\turl: `https://api.foursquare.com/v2/venues/${selected.id}/photos`,\n  \t\tmethod: 'GET',\n  \t\tdataType: \"json\",\n  \t\tdata: {\n\t\t\tclient_id: \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\",\n\t\t\tclient_secret: \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\",\n\t\t\tv: 20171120\n\t\t}\n\t}).then(function(data){\n\t\tapp.selectedImage = `${data.response.photos.items[0].prefix}${data.response.photos.items[0].width}x${data.response.photos.items[0].height}${data.response.photos.items[0].suffix}`;\n\t}).then(function(){\n\t\tapp.selectedPlace = {\n\t\t\tid: app.selected.venue.id,\n\t\t\tname: app.selected.venue.name,\n\t\t\tdistance: app.selected.venue.location.distance,\n\t\t\trating: app.selected.venue.rating,\n\t\t\tprice: app.selected.venue.price.tier,\n\t\t\turl: app.selected.venue.url,\n\t\t\tphone: app.selected.venue.contact.phone,\n\t\t\tphoto: app.selectedImage,\n\t\t\tlat: app.selected.venue.location.lat,\n\t\t\tlng: app.selected.venue.location.lng,\n\t\t\ttips: app.selected.tips[0].text\n\t\t}\n\t\tapp.place(app.selectedPlace);\n\t})\n}\n\napp.pickRandom = (array) => {\n\tlet randomNum = Math.floor(Math.random() * app.filtered.length)\n\tif(app.filtered.length > 0){\n\t\tapp.selected = app.filtered[randomNum];\n\t\tapp.getImage(app.selected.venue);\n\t} else {\n\t\tTweenMax.to($('.warning'),1,{opacity: \"1\", display : \"block\"});\n\t}\n}\n\napp.filterResult = (data) => {\n\tapp.filtered = data.filter((data) => {\n\t\treturn data.venue.rating > 8.5;\n\t})\n}\n\napp.mapArray = (ndelete) => {\n\tconsole.log(ndelete);\n\tconst index = app.filtered.indexOf(ndelete);\n\tconst newArray = app.filtered.splice(index,1);\n}\n\napp.fourSquare = (loca, what) => {\n\tapp.clientId = \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\";\n\tapp.clientSecret = \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\";\n\t$.ajax({\n\t\turl: 'https://api.foursquare.com/v2/venues/explore',\n  \t\tmethod: 'GET',\n  \t\tdataType: \"json\",\n  \t\tdata: {\n\t\t\tclient_id: \"VH42GH0DFNZLHDRYB4JULCZIPHD3DA4DUCKVPVBMJQIX350R\",\n\t\t\tclient_secret: \"DLDPDU4LK3ZAGTLHFQLC2JEDGNR01X1MCRRS1NF3VQPV22VL\",\n\t\t\tll: `${loca.lat},${loca.long}`,\n\t\t\t// section: \"food\",\n\t\t\tradius: 2500,\n\t\t\tquery: `${what}`,\n\t\t\topenNow: 1,\n\t\t\tv: 20171120\n\t\t}\n\t}).then(function(data){\n\t\tapp.filterResult(data.response.groups[\"0\"].items);\n\t}).then(function(){\n\t\tapp.pickRandom(app.filtered);\n\t\t$('#section2').fadeToggle();\n\t\t$('#section1').fadeToggle();\n\t\tTweenMax.to($('#section2'), 1, {opacity:1, ease:Back.easeOut}).delay(1);\n\t})\n}\n\napp.googleMaps = (loca, desti) => {\n\tapp.googleKey = \"AIzaSyB6UumqnkB2X99K9Eeef_RzAQSENqA3I0k\";\n\tvar markerArray = [];\n\n\tconst origin = new google.maps.LatLng(loca.lat, loca.long);\n\tconst destination = new google.maps.LatLng(desti.lat,desti.lng);\n\tconst map_container = $('#map')[0];\n\tconst mapInfo = {\n\t\tcenter: {\n\t\t\tlat: loca.lat,\n\t\t\tlng: loca.long\n\t\t},\n\t\tzoom: 20\n\t\t\t// styles: options\n\t\t}\n\n\t// Instantiate a directions service.\n\tvar directionsService = new google.maps.DirectionsService;\n\n\tmap = new google.maps.Map(map_container, mapInfo);\n\t// home = new google.maps.Marker({\n\t// \tposition: new google.maps.LatLng(mapInfo.center.lat, mapInfo.center.lng),\n\t// \tmap:map\n\t// });\n\n\t// Create a renderer for directions and bind it to the map.\n    var directionsDisplay = new google.maps.DirectionsRenderer({map: map});\n\n    // Instantiate an info window to hold step text.\n    var stepDisplay = new google.maps.InfoWindow;\n    // Display the route between the initial start and end selections.\n\tcalculateAndDisplayRoute(directionsDisplay, directionsService, markerArray, stepDisplay, map);\n\n\tfunction calculateAndDisplayRoute(directionsDisplay, directionsService,\n\t  markerArray, stepDisplay, map) {\n\t\t// First, remove any existing markers from the map.\n\t\tfor (var i = 0; i < markerArray.length; i++) {\n\t\t  markerArray[i].setMap(null);\n\t\t}\n\n\t// Retrieve the start and end locations and create a DirectionsRequest using\n\t// WALKING directions.\n\t\tdirectionsService.route({\n\t\t\torigin: origin,\n\t\t\tdestination: destination,\n\t\t\ttravelMode: 'WALKING'\n\t\t}, function(response, status) {\n\t\t\t// Route the directions and pass the response to a function to create\n\t\t\t// markers for each step.\n\t\t\tif (status === 'OK') {\n\t\t\t\t// document.getElementById('warnings-panel').innerHTML =\n\t\t\t //    '<b>' + response.routes[0].warnings + '</b>';\n\t\t\t\tdirectionsDisplay.setDirections(response);\n\t\t\t\tshowSteps(response, markerArray, stepDisplay, map);\n\t\t\t} else {\n\t\t\t\twindow.alert('Directions request failed due to ' + status);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction showSteps(directionResult, markerArray, stepDisplay, map) {\n\t\t// For each step, place a marker, and add the text to the marker's infowindow.\n\t\t// Also attach the marker to an array so we can keep track of it and remove it\n\t\t// when calculating new routes.\n\t\tvar myRoute = directionResult.routes[0].legs[0];\n\t\tfor (var i = 0; i < myRoute.steps.length; i++) {\n\t\t\tvar marker = markerArray[i] = markerArray[i] || new google.maps.Marker;\n\t\t\tmarker.setMap(map);\n\t\t\t// marker.setPosition(myRoute.steps[i].start_location);\n\t\t\t// attachInstructionText(stepDisplay, marker, myRoute.steps[i].instructions, map);\n\t\t}\n\t}\n\n\tfunction attachInstructionText(stepDisplay, marker, text, map) {\n\t\tgoogle.maps.event.addListener(marker, 'click', function() {\n\t\t// Open an info window when the marker is clicked on, containing the text\n\t\t// of the step.\n\t\t\tstepDisplay.setContent(text);\n\t\t\tstepDisplay.open(map, marker);\n\t\t});\n\t}\n}\n\napp.location = () => {\n\treturn new Promise((resolve, reject) => {\n\t\tnavigator.geolocation.getCurrentPosition((position) =>{\n\t\t\tresolve(position);\t\n\t\t\tapp.loca = {\n\t\t\t\tlat: position.coords.latitude,\n\t\t\t\tlong: position.coords.longitude,\n\t\t\t}\n\t\t})\n\t})\n}\n\napp.dataBase = () => {\n\n\tconst config = {\n\t\tapiKey: \"AIzaSyCsA8GKOpORb7xuyhUNH7JhDtFWzJ6IYWg\",\n\t    authDomain: \"project3-f7eba.firebaseapp.com\",\n\t    databaseURL: \"https://project3-f7eba.firebaseio.com\",\n\t    projectId: \"project3-f7eba\",\n\t    storageBucket: \"project3-f7eba.appspot.com\",\n\t    messagingSenderId: \"925278152263\"\n\t}\n\n\tfirebase.initializeApp(config);\n\tconst database = firebase.database();\n\n\tfirebase.auth().onAuthStateChanged(function(user) {\n\t\tif (user) {\n\t\t    app.userId = firebase.auth().currentUser;\n\t\t} else {\n\t\t// No user is signed in.\n\t\t}\n\t});\t\n}\n\napp.Log = (type) => {\n\tif ( type == \"facebook\"){\n\t\tvar provider = new firebase.auth.FacebookAuthProvider();\n\t} else if ( type == \"google\"){\n\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t} else if ( type == \"github\"){\n\t\tvar provider = new firebase.auth.GithubAuthProvider();\n\t}\n\n\tfirebase.auth().onAuthStateChanged(function(user) {\t\n\t\tif (!user) { \n\t\t\tfirebase.auth().signInWithPopup(provider).then(function(result) {\n\t\t\t// This gives you a Google Access Token. You can use it to access the Google API.\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\t// The signed-in user info.\n\t\t\t\tapp.userId = result.user;\n\t\t\t\t// ...\n\t\t\t}).catch(function(error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\t// Handle Errors here.\n\t\t\t\tvar errorCode = error.code;\n\t\t\t\tvar errorMessage = error.message;\n\t\t\t\t// The email of the user's account used.\n\t\t\t\tvar email = error.email;\n\t\t\t\t// The firebase.auth.AuthCredential type that was used.\n\t\t\t\tvar credential = error.credential;\n\t\t\t\t// ...\n\t\t\t});\n\t\t} else if ( user  && window.location.pathname == `/`){\n\t\t\twindow.location = `/${app.baseURL}app.html`;\n\n\t\t} else if ( !user && window.location.pathname == `/${app.baseURL}app.html`){\n\t\t\twindow.location = `/`;\n\t\t}\t\n\t});\n}\n\napp.eventFire = () => {\n\tconst $s3back = $('#section3 .btnblue');\n\tconst $s2direction = $('#direction');\n\tconst $s2change = $('#section2 .btnwhite:first-child');\n\tconst $s2another = $('#section2 .btnwhite:last-child');\n\tconst $s2like = $('#like');\n\tconst $s1food = $('.foodbtn');\n\n\tconst $shlog = $('#log_in');\n\tconst $shheader = $('#header div');\n\n\tconst $segoogle = $('#loginSection > div');\n\n\t$s2like.on(\"click\", function(){\n\t\t$(this).addClass('animation');\n\t\tfirebase.database().ref(`/users/${firebase.auth().currentUser.uid}/liked`).push(app.selectedPlace);\n\t\tsetTimeout(function(){\n\t\t\t$s2like.removeClass('animation');\n\t\t},2000);\n\t})\n\n\t$s3back.on(\"click\", () => {\n\t\t$('#section2').fadeToggle();\n\t\t$('#section3').fadeToggle();\n\t\t$('#map').remove();\n\t\tmap = null;\n\t\t\n\t})\n\n\t$s2direction.on(\"click\", () => {\n\t\t$('#section3').prepend(`<div id=\"map\"></div>`);\n\t\tapp.googleMaps(app.loca, app.destination);\n\t\t$('#section3').fadeToggle();\n\t\t$('#section2').fadeToggle();\n\t})\n\n\t$s2change.on(\"click\", () => {\n\t\t$('#section1').fadeToggle();\n\t\t$('#section2').fadeToggle();\n\t})\n\n\t$s2another.on(\"click\", () => {\n\t\tconst action = new Promise (function (resolve){\n\t\t\t$('#section2').fadeOut();\n\n\t\t\t// setTimeout(function(){\n\t\t\t\tresolve()\n\t\t\t// },2000);\n\t\t}).then(function(){\n\t\t\tapp.pickRandom(app.filtered);\n\t\t\t// app.place(app.selectedPlace);\n\t\t}).then(function(){\n\t\t\t$('#section2').css('opacity',0);\n\t\t\t$('#section2').fadeIn();\n\t\t\t// TweenMax.to($('#section2'), 1, {opacity:1, ease:Back.easeOut}).delay(5);\n\t\t})\t\n\t})\n\n\t$s1food.on(\"click\", function(){\n\t\tapp.foodType = $(this).data('type');\n\t\tTweenMax.to($('.preloader'),1,{display : \"flex\",opacity: \"1\"});\n\t\tapp.location().then(() => {\n\t\t\t\n\t\t}).then((resolve) =>{\n\t\t\tapp.fourSquare(app.loca, app.foodType)\n\t\t\tTweenMax.to($('.preloader'),1,{opacity: \"0\", display : \"none\"});\n\t\t\t\n\t\t})\t\n\t})\n\n\t$shlog.on(\"click\",function(){\n\t\tif (window.location.pathname != `${app.baseURL}` ){\n\t\t\tfirebase.auth().signOut().then(function() {\n\t\t\t\twindow.location = `${app.baseURL}`;\n\t\t\t}).catch(function(error) {\n\t\t\t\tconsole.log(error); \n\t\t\t});\n\t\t}\n\t})\n\n\t$segoogle.on(\"click\", function(){\n\t\tlet selected = $(this).data('log');\n\t\tapp.Log(selected);\n\t})\n\n\t$shheader.on(\"click\", function(){\n\t\tif ($(this).hasClass(\"active\")){\n\t\t\t$shheader.removeClass('active');\n\t\t\t$(this).empty();\n\t\t\tif ($(this).is('#liked')){\n\t\t\t\t$('#liked').append(`<i class=\"fas fa-thumbs-up\"></i>`);\n\t\t\t} else if ($(this).is('#history')){\n\t\t\t\t$('#history').append(`<i class=\"fas fa-history\"></i>`);\n\t\t\t}\n\t\t\t$('#external_info').removeClass('active');\n\t\t\tTweenMax.to($('#external_info'),1,{opacity: \"0\", display : \"none\"});\n\t\t} else {\n\t\t\t$shheader.removeClass('active');\n\t\t\t$('#external_info').removeClass('active');\n\t\t\tTweenMax.to($('#external_info'),1,{opacity: \"0\", display : \"none\"});\n\t\t\t$('#liked_content').empty();\n\t\t\t$('#history_content').empty();\n\t\t\t$(this).addClass(\"active\");\n\t\t\t$(this).empty();\n\t\t\t$(this).append(`<i class=\"fas fa-times-circle\"></i>`);\n\t\t\tif ($(this).is('#liked')){\n\t\t\t\t$('#external_info').addClass('active');\n\t\t\t\tTweenMax.to($('#external_info'),1,{display : \"block\",opacity: \"1\"});\n\t\t\t\t$('#history').empty();\n\t\t\t\t$('#history').append(`<i class=\"fas fa-history\"></i>`);\n\t\t\t\tapp.displayDatabase('liked');\n\t\t\t} else if ($(this).is('#history')){\n\t\t\t\t$('#external_info').addClass('active');\n\t\t\t\tTweenMax.to($('#external_info'),1,{display : \"block\",opacity: \"1\"});\n\t\t\t\t$('#liked').empty();\n\t\t\t\t$('#liked').append(`<i class=\"fas fa-thumbs-up\"></i>`);\n\t\t\t\tapp.displayDatabase('history');\t\n\t\t\t}\n\t\t}\n\t})\n\n\t$('.warning .btnblue').on(\"click\",function(){\n\t\tTweenMax.to($('.warning'),1,{opacity: \"0\", display : \"none\"});\n\t});\n}\n\napp.init = () => {\n\tapp.dataBase();\n\tTweenMax.to($('.foodbtn'), 2, {opacity:1, ease:Back.easeOut});\n}\n\n$(function() {\n\tapp.init();\n\tapp.eventFire();\n});"]}